import{d as g,j as b,h as _,o as k,k as z,w as a,a as u,e as l,r as d,l as V,c as q,f as M,t as B,i as D,b as j}from"./index-xJjP6Nmh.js";import{d as y,a as E,c as N,g as S,s as F}from"./firebaseConfig-BdAa5G6p.js";const I=g({__name:"CheckAntiquesModal",props:{showModal:{},showModalModifiers:{}},emits:["update:showModal"],setup(w){const n=b(w,"showModal");return(m,f)=>{const p=_("n-card"),h=_("n-modal");return k(),z(h,{show:n.value,"onUpdate:show":f[0]||(f[0]=c=>n.value=c),"mask-closable":!0},{default:a(()=>[u(p,{style:{width:"400px"},title:"Modal",bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{"header-extra":a(()=>[l(" Oops! ")]),footer:a(()=>[l(" Footer ")]),default:a(()=>[l(" Content ")]),_:1})]),_:1},8,["show"])}}}),U={class:"w-10/12 max-w-sm mt-8 mx-auto text-center"},$={class:"text-3xl"},G={class:"flex flex-col h-96 justify-around"},H=g({__name:"Game",setup(w){const n=D();j();const m=d();m.value=n.params.roomId;const f=d();f.value=n.query.player;const p=y(E,"rooms",m.value),h=d(1),c=d(!1),v=d(),C=async()=>{try{const o=N(p,"animals"),e=await S(o),t=[];e.forEach(r=>{const i=r.data(),s={name:i.animal,value:i.value,view_value:i.view_value};t.push(s)}),console.log(t),v.value=t}catch{}},A=async()=>{try{const o=v.value.filter(s=>s.value===1),e=v.value.filter(s=>s.value===0),t=x(o,2),r=x(e,2),i=R([...t,...r]);for(const s of i)await F(y(p,"fourRandomAnimals",String(h.value++)),s)}catch{}},x=(o,e)=>o.sort(()=>.5-Math.random()).slice(0,e),R=o=>{for(let e=o.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[o[e],o[t]]=[o[t],o[e]]}return o};return V(async()=>{n.query.host==="1"&&(await C(),console.log(A()))}),(o,e)=>{const t=_("n-button");return k(),q("div",U,[M("p",$,"房號："+B(m.value),1),M("div",G,[u(t,{class:"text-4xl h-14",type:"primary",size:"large",onClick:e[0]||(e[0]=()=>{})},{default:a(()=>[l("查看隊友")]),_:1}),u(t,{class:"text-4xl h-14",type:"primary",size:"large",onClick:e[1]||(e[1]=r=>c.value=!0)},{default:a(()=>[l("鑑定古董")]),_:1}),u(t,{class:"text-4xl h-14",type:"primary",size:"large",onClick:e[2]||(e[2]=()=>{})},{default:a(()=>[l("使用技能")]),_:1}),u(t,{class:"text-4xl h-14",type:"primary",size:"large",onClick:e[3]||(e[3]=()=>{})},{default:a(()=>[l("選擇下一位玩家")]),_:1})]),u(I,{showModal:c.value,"onUpdate:showModal":e[4]||(e[4]=r=>c.value=r)},null,8,["showModal"])])}}});export{H as default};
