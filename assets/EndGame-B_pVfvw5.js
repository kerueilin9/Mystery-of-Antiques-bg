import{d as b,h as D,r as s,j as C,a as p,o as k,c as I,g as l,t as m,b as h,w as _,e as M,l as N,u as B}from"./index-_-8Mi2D0.js";import{d as R,a as y,q as v,c as f,w as g,g as x}from"./firebaseConfig-BR434puB.js";const V={class:"w-10/12 max-w-sm mt-8 mx-auto text-center"},E={class:"text-3xl"},G={class:"text-9xl mt-28"},j={class:"mt-16"},T=b({__name:"EndGame",setup(A){const u=N();B(),D();const o=s();o.value=u.params.roomId;const q=R(y,"rooms",o.value),d=s();d.value=u.query.player;const n=s(),c=s(""),i=["LaoChaofeng","MedicineIsNot","ZhengGuoqu"],S=async t=>{try{const e=v(f(q,"players"),g("name","==",t));return(await x(e)).docs[0].data()}catch(e){console.log(e)}},w=async()=>{try{const t=v(f(y,"rooms"),g("roomId","==",o.value)),a=(await x(t)).docs[0].data();a.score>=2&&!i.includes(n.value.character)||a.score<=0&&i.includes(n.value.character)?c.value="勝":c.value="敗"}catch(t){console.log(t)}};return C(async()=>{n.value=await S(String(d.value)),await w()}),(t,e)=>{const r=p("n-button"),a=p("router-link");return k(),I("div",V,[l("p",E,"房號："+m(o.value),1),l("div",G,m(c.value),1),l("div",j,[h(a,{to:"/Mystery-of-Antiques-bg/"},{default:_(()=>[h(r,{round:"",class:"text-6xl h-fit p-4",type:"primary"},{default:_(()=>[M("回到大廳")]),_:1})]),_:1})])])}}});export{T as default};
