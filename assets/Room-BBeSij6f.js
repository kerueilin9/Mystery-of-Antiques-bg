import{d as F,r as p,g as d,h as o,o as I,c as N,f as _,t as f,a as t,w as r,i as P,b as j,e as v}from"./index-xJjP6Nmh.js";import{d as h,a as V,s as z}from"./firebaseConfig-BdAa5G6p.js";const D={class:"w-10/12 max-w-sm mt-8 mx-auto text-center"},K={class:"text-3xl"},M={class:"flex gap-2 flex-wrap mt-2 justify-center"},$=F({__name:"Room",setup(S){const c=P(),b=j(),l=p();l.value=c.params.roomId;const g=[{label:"老朝奉",value:"HuangYanyan"},{label:"藥不然",value:"KidoKana"},{label:"鄭國渠",value:"JiYunfu"},{label:"許願",value:"FangZhen"},{label:"方震",value:"MakeAWish"},{label:"姬雲浮",value:"ZhengGuoqu"},{label:"木戶加奈",value:"MedicineIsNot"},{label:"黃煙煙",value:"LaoChaofeng"}],a=p({...{name:null,character:null}}),y={name:{required:!0,trigger:["blur","input","change"],type:"string",validator:(n,e)=>e==null||e===""?Promise.reject("必填"):Promise.resolve()},character:{required:!0,trigger:["blur","input","change"],type:"string",validator:(n,e)=>e==null||e===""?Promise.reject("必填"):Promise.resolve()}},u=d(()=>c.query.host==="1"),x=d(()=>u.value?"開始遊戲":"加入遊戲"),w=async()=>{try{const n=h(V,"rooms",l.value),e={host:u.value,character:a.value.character};await z(h(n,"players",a.value.name),e),b.push({path:`/game/${l.value}`,query:{host:u.value?1:0,player:a.value.name}})}catch{}};return(n,e)=>{const k=o("n-input"),i=o("n-form-item"),q=o("n-select"),R=o("n-form"),B=o("n-card"),m=o("n-button"),C=o("router-link");return I(),N("div",D,[_("p",K,"房號："+f(l.value),1),t(B,{title:"玩家資料",class:"mt-8"},{default:r(()=>[t(R,{class:"text-center",ref:"basicFormRef","require-mark-placement":"left",rules:y,model:a.value},{default:r(()=>[t(i,{path:"name",label:"玩家暱稱"},{default:r(()=>[t(k,{class:"w-full","show-button":!1,value:a.value.name,"onUpdate:value":e[0]||(e[0]=s=>a.value.name=s),placeholder:"請填參與玩家都知道的暱稱"},null,8,["value"])]),_:1}),t(i,{path:"character",label:"角色"},{default:r(()=>[t(q,{class:"w-full",value:a.value.character,"onUpdate:value":e[1]||(e[1]=s=>a.value.character=s),options:g,placeholder:"選取抽到的角色"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1}),_("section",M,[t(C,{to:"/",class:"underline"},{default:r(()=>[t(m,{size:"large"},{default:r(()=>[v("返回")]),_:1})]),_:1}),t(m,{size:"large",type:"primary",onClick:e[2]||(e[2]=s=>w())},{default:r(()=>[v(f(x.value),1)]),_:1})])])}}});export{$ as default};
